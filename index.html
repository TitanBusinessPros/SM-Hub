<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Social Media Hub Maker — Exportable</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#0b1028; --bg2:#071228; --accent1:#7c3aed; --accent2:#06b6d4;
    --card-bg: rgba(255,255,255,0.06); --muted: rgba(255,255,255,0.75);
    --radius:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background: linear-gradient(120deg,var(--bg1),var(--bg2));
    color:#fff; display:flex; align-items:flex-start; justify-content:center; padding:28px;
  }

  /* decorative canvas/art */
  .art {
    position:fixed; inset:0; z-index:0; pointer-events:none;
  }
  .art svg{width:100%;height:100%;opacity:0.16;mix-blend-mode:screen}

  .wrap{
    width:100%; max-width:1100px; display:grid; grid-template-columns: 1fr 480px; gap:24px; z-index:2;
  }

  /* Builder panel */
  .panel{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:calc(var(--radius) + 6px); padding:22px; box-shadow:0 14px 40px rgba(2,6,23,0.6);
    border:1px solid rgba(255,255,255,0.04);
  }
  h1{margin:6px 0 10px;font-weight:800;font-size:20px}
  p.lead{margin:0 0 12px;color:var(--muted);font-size:13px}

  label{display:block;margin-top:10px;font-size:13px;font-weight:600;color:var(--muted)}
  input[type="text"], textarea, select{
    width:100%; padding:10px 12px; margin-top:8px; border-radius:10px; border:none; outline:none;
    background:rgba(255,255,255,0.03); color: #fff; font-size:14px; resize:vertical;
  }

  .row{display:flex;gap:12px}
  .small{font-size:12px;color:var(--muted);margin-top:8px}

  .btns{display:flex;gap:12px;margin-top:14px}
  button.primary{
    background:linear-gradient(90deg,var(--accent1),var(--accent2)); border:0; color:#fff; padding:10px 14px;
    border-radius:10px; font-weight:700; cursor:pointer;
  }
  button.ghost{
    background:transparent;border:1px solid rgba(255,255,255,0.06); color:var(--muted); padding:10px 12px;border-radius:10px; cursor:pointer;
  }

  /* Preview panel */
  .preview-wrap{
    display:flex; align-items:center; justify-content:center;
  }
  .card{
    width:100%; max-width:420px; border-radius:18px; padding:24px; text-align:center;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border:1px solid rgba(255,255,255,0.04); box-shadow: 0 12px 40px rgba(2,6,23,0.6);
  }
  .avatar{
    width:96px;height:96px;border-radius:18px;margin:0 auto 14px;display:grid;place-items:center;
    font-weight:800;font-size:34px; color:white;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    box-shadow: 0 8px 26px rgba(7,10,29,0.5);
  }
  .name{font-size:20px;font-weight:800;margin:6px 0}
  .bio{color:var(--muted);font-size:13px;margin:0 0 14px;white-space:normal;word-break:break-word;overflow-wrap:break-word}

  .links{display:flex;flex-direction:column;gap:12px;align-items:stretch}
  .link{
    display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-radius:12px;
    text-decoration:none;color:#fff;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.03); transition: transform .16s ease, box-shadow .16s ease;
    word-break:break-word; overflow-wrap:break-word;
  }
  .link:hover{transform:translateY(-6px);box-shadow:0 18px 46px rgba(2,6,23,0.6)}
  .left{display:flex;align-items:center;gap:12px}
  .pill{width:48px;height:48px;border-radius:10px;display:grid;place-items:center;font-weight:800;background:linear-gradient(135deg,var(--accent1),var(--accent2));box-shadow:0 6px 18px rgba(7,10,29,0.45)}
  .title-wrap{text-align:left}
  .title{font-weight:700;font-size:14px}
  .sub{font-size:12px;color:var(--muted);margin-top:2px}

  /* source area fallback */
  #sourceArea{width:100%;height:220px;margin-top:12px;border-radius:10px;padding:12px;background:rgba(0,0,0,0.06);color:#fff;border:1px solid rgba(255,255,255,0.03);font-family:monospace;font-size:12px;white-space:pre-wrap;overflow:auto}

  /* Responsive */
  @media (max-width:980px){
    .wrap{grid-template-columns:1fr}
    .preview-wrap{order:-1;margin-bottom:12px}
  }
</style>
</head>
<body>

  <!-- Decorative SVG art -->
  <div class="art" aria-hidden>
    <svg viewBox="0 0 1200 600" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#7c3aed"/><stop offset="1" stop-color="#06b6d4"/></linearGradient>
      </defs>
      <path d="M0,120 C150,220 300,40 500,120 C700,200 850,40 1200,120 L1200,600 L0,600 Z" fill="url(#g1)"/>
    </svg>
  </div>

  <div class="wrap" role="main">
    <!-- Builder -->
    <section class="panel" aria-label="Builder">
      <h1>Social Media Hub Maker</h1>
      <p class="lead">Type links (one per line). Use <code>Service | URL</code> or just paste an URL per line. Click Generate then Download or Copy.</p>

      <label for="initials">Initials (avatar)</label>
      <input id="initials" type="text" maxlength="4" placeholder="AB" value="AB" />

      <label for="name">Display name</label>
      <input id="name" type="text" placeholder="Your name" value="Alex Bright" />

      <label for="bio">Bio / tagline</label>
      <textarea id="bio" rows="2" placeholder="Short tagline">Creator &amp; curious human — building things.</textarea>

      <label for="links">Links (one per line — Service | URL)</label>
      <textarea id="links" rows="8" placeholder="Website | https://example.com
Newsletter | https://newsletter.example.com
Contact | mailto:hello@example.com">Website | https://example.com
Blog | https://blog.example.com
Newsletter | https://newsletter.example.com
Contact | mailto:hello@example.com</textarea>

      <div class="btns">
        <button class="primary" id="btnGenerate">Generate</button>
        <button class="ghost" id="btnDownload">Download HTML</button>
        <button class="ghost" id="btnCopy">Copy HTML</button>
      </div>

      <div class="small">If download is blocked by your browser, use <strong>Copy HTML</strong> and paste into a file, save with <code>.html</code>.</div>

      <div id="sourceArea" style="display:none" aria-hidden="true"></div>
    </section>

    <!-- Preview -->
    <aside class="preview-wrap">
      <div class="card" aria-live="polite" id="previewCard">
        <div class="avatar" id="pvInitials">AB</div>
        <div class="name" id="pvName">Alex Bright</div>
        <div class="bio" id="pvBio">Creator &amp; curious human — building things.</div>
        <div class="links" id="pvLinks" aria-label="Links area"></div>
      </div>
    </aside>
  </div>

<script>
/* Utilities */
function esc(s){
  if(s == null) return '';
  return String(s)
    .replace(/&/g,'&amp;')
    .replace(/</g,'&lt;')
    .replace(/>/g,'&gt;')
    .replace(/"/g,'&quot;')
    .replace(/'/g,'&#39;');
}

/* Robust line parser:
  Accepts:
    "Service | https://..."
    "https://example.com"
    "Service | mailto:..."
    "Service | https://... | subtitle"
*/
function parseLines(text){
  const rows = text.split(/\r?\n/).map(r=>r.trim()).filter(Boolean);
  const out = [];
  for(const r of rows){
    // split on first | up to two splits
    const parts = r.split('|').map(p=>p.trim());
    let title = parts[0] || '';
    let url = parts[1] || '';
    let subtitle = parts[2] || '';

    // If user only provided a URL in the first part, make title from hostname
    const looksLikeUrl = s => /^(https?:\/\/|mailto:|tel:)/i.test(s) || /\.[a-z]{2,}\/?/.test(s);
    if(!url && looksLikeUrl(title)){
      url = title;
      // Use domain or the URL itself for title if no explicit service
      try {
        const u = new URL(url.startsWith('http') ? url : 'https://'+url);
        title = u.hostname.replace(/^www\./,'');
      } catch(e){ title = url; }
    }
    if(title && url) out.push({title, url, subtitle});
  }
  return out;
}

/* Build preview */
function buildPreview(){
  const initials = document.getElementById('initials').value.trim() || '??';
  const name = document.getElementById('name').value.trim() || 'Unnamed';
  const bio = document.getElementById('bio').value.trim() || '';
  const raw = document.getElementById('links').value || '';

  const parsed = parseLines(raw);
  // Update preview
  document.getElementById('pvInitials').textContent = initials.slice(0,4).toUpperCase();
  document.getElementById('pvName').textContent = name;
  document.getElementById('pvBio').textContent = bio;

  const container = document.getElementById('pvLinks');
  container.innerHTML = '';
  if(parsed.length === 0){
    const no = document.createElement('div');
    no.className = 'sub';
    no.textContent = 'No links entered yet.';
    container.appendChild(no);
  } else {
    parsed.forEach(it=>{
      const a = document.createElement('a');
      a.className = 'link';
      a.href = it.url;
      a.target = '_blank';
      a.rel = 'noopener noreferrer';
      a.innerHTML = `
        <div class="left">
          <div class="pill">${esc(it.title).slice(0,2).toUpperCase()}</div>
          <div class="title-wrap">
            <div class="title">${esc(it.title)}</div>
            ${it.subtitle ? `<div class="sub">${esc(it.subtitle)}</div>` : ''}
          </div>
        </div>
        <div style="opacity:.9; font-weight:700">➔</div>
      `;
      container.appendChild(a);
    });
  }
}

/* Build final standalone HTML string safely */
function buildHubHtmlString(){
  const initials = esc(document.getElementById('initials').value.trim() || '??');
  const name = esc(document.getElementById('name').value.trim() || 'Unnamed');
  const bio = esc(document.getElementById('bio').value.trim() || '');
  const parsed = parseLines(document.getElementById('links').value || '');

  // Build links markup with escaped content
  const linksHtml = parsed.map(it => {
    const title = esc(it.title);
    const url = esc(it.url);
    const subtitle = esc(it.subtitle || '');
    return `<a class="link" href="${url}" target="_blank" rel="noopener noreferrer">
      <div class="left">
        <div class="pill">${title.slice(0,2).toUpperCase()}</div>
        <div class="title-wrap">
          <div class="title">${title}</div>
          ${subtitle ? `<div class="sub">${subtitle}</div>` : ''}
        </div>
      </div>
      <div style="opacity:.9;font-weight:700;">➔</div>
    </a>`;
  }).join("\n      ");

  const full = `<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>${name} — Links</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{--accent1:${'#7c3aed'};--accent2:${'#06b6d4'};}
  *{box-sizing:border-box}html,body{height:100%}
  body{margin:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(120deg,#0b1028,#071228);color:#fff;display:flex;align-items:center;justify-content:center;padding:30px}
  .card{width:100%;max-width:480px;border-radius:18px;padding:28px;text-align:center;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);box-shadow:0 14px 40px rgba(2,6,23,0.6)}
  .avatar{width:96px;height:96px;border-radius:18px;margin:0 auto 14px;display:grid;place-items:center;font-weight:800;font-size:34px;background:linear-gradient(135deg,var(--accent1),var(--accent2));box-shadow:0 8px 26px rgba(7,10,29,0.5)}
  h1{margin:6px 0 0;font-size:22px}
  p.bio{color:rgba(255,255,255,0.85);font-size:14px;margin:8px 0 18px;word-break:break-word}
  .links{display:flex;flex-direction:column;gap:12px;align-items:stretch}
  .link{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-radius:12px;text-decoration:none;color:#fff;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);transition:transform .16s,box-shadow .16s}
  .link:hover{transform:translateY(-6px);box-shadow:0 16px 40px rgba(2,6,23,0.5)}
  .pill{width:48px;height:48px;border-radius:10px;display:grid;place-items:center;font-weight:800;background:linear-gradient(135deg,var(--accent1),var(--accent2))}
  .title{font-weight:700}
  .sub{font-size:12px;color:rgba(255,255,255,0.78);margin-top:4px}
  @media (max-width:520px){body{padding:18px}.card{padding:18px}}
</style>
</head>
<body>
  <div class="card">
    <div class="avatar">${initials}</div>
    <h1>${name}</h1>
    <p class="bio">${bio}</p>
    <div class="links">
      ${linksHtml}
    </div>
  </div>
</body>
</html>`;
  return full;
}

/* Download helper with fallback */
function downloadHub(){
  const html = buildHubHtmlString();
  try {
    const blob = new Blob([html], {type: 'text/html'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    const name = (document.getElementById('name').value.trim() || 'my_hub').replace(/\s+/g,'_');
    a.download = `${name}_hub.html`;
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
    // Hide source area if visible
    document.getElementById('sourceArea').style.display = 'none';
    alert('Download triggered. If your browser blocked it, use "Copy HTML" to save manually.');
  } catch (e){
    // fallback to showing source
    showSource(html);
  }
}

/* Copy HTML to clipboard fallback + show area */
async function copyHtmlToClipboard(){
  const html = buildHubHtmlString();
  try{
    if(navigator.clipboard && navigator.clipboard.writeText){
      await navigator.clipboard.writeText(html);
      alert('Generated HTML copied to clipboard. Paste into a .html file and save.');
      document.getElementById('sourceArea').style.display = 'none';
    } else {
      showSource(html);
      alert('Clipboard not available — the HTML is shown below for manual copy.');
    }
  }catch(e){
    showSource(html);
    alert('Could not copy to clipboard. The HTML is shown below for manual copy.');
  }
}

function showSource(src){
  const area = document.getElementById('sourceArea');
  area.style.display = 'block';
  area.textContent = src;
  area.scrollTop = 0;
}

/* Event wiring */
document.getElementById('btnGenerate').addEventListener('click', ()=>{
  buildPreview();
  // hide source area when preview generated
  document.getElementById('sourceArea').style.display = 'none';
});
document.getElementById('btnDownload').addEventListener('click', ()=> {
  // ensure preview up-to-date
  buildPreview();
  downloadHub();
});
document.getElementById('btnCopy').addEventListener('click', ()=> {
  buildPreview();
  copyHtmlToClipboard();
});

/* Live preview: update while typing but debounced */
let debounceTimer = 0;
['initials','name','bio','links'].forEach(id=>{
  document.getElementById(id).addEventListener('input', ()=>{
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(buildPreview, 220);
  });
});

// initial render
buildPreview();
</script>
</body>
</html>
